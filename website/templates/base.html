<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %} Base {% endblock %}</title>

    <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='assets/logo.png') }}">
    <!-- For Chrome, Firefox OS, Opera and Vivaldi -->
    <meta name="theme-color" content="#212529">
    <!-- Windows Phone -->
    <meta name="msapplication-navbutton-color" content="#212529">
    <!-- iOS Safari -->
    <meta name="apple-mobile-web-app-status-bar-style" content="#212529">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    <script src="https://kit.fontawesome.com/9ab08fbc2e.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    {% block extra_styles %} {% endblock %}
    {% block extra_head_scipts %} {% endblock extra_head_scipts %}
</head>
<body>
    <header>
        <nav class="navbar navbar-expand-lg bg-dark navbar-dark fixed-top text-center">
            <div class="container">
                {% block navbar_logo %}
                <a href="{{ url_for('views.home') }}" class="navbar-brand">
                    <img src="{{ url_for('static', filename='assets/logo.png') }}" width="60" height="80" alt="logo">
                </a>
                {% endblock navbar_logo %}

                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#collapseNav" aria-controls="collapseNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

               <div class="collapse navbar-collapse" id="collapseNav">
                <ul class="navbar-nav nav-underline ms-auto">
                    {% block navbar_links %}
                     {% if user.user_role == 'admin' %}
                    <li class="nav-item mx-auto">
                        <a href="{{ url_for('views.home') }}" class="nav-link nav-under">Admin Dashboard</a>
                    </li>
                     {% endif %}
                    <li class="nav-item mx-auto">
                        <a href="{{ url_for('views.home') }}" class="nav-link active nav-under">Home</a>
                    </li>
                    <li class="nav-item mx-auto">
                        <a href="{{ url_for('views.payments') }}" class="nav-link nav-under">Payments</a>
                    </li>
                    <li class="nav-item mx-auto">
                        <a href="{{ url_for('views.manage_todos') }}" class="nav-link nav-under">Todos</a>
                    </li>
                    <li class="nav-item mx-auto">
                        <a href="{{ url_for('views.notes') }}" class="nav-link nav-under">Notes</a>
                    </li>
                    <li class="nav-item mx-auto">
                        <a href="{{ url_for('views.profile') }}"class="nav-link"><i class="fa-solid fa-user"></i></a>
                    </li>
                    <li class="nav-item mx-auto">
                        <a href="{{ url_for('auth.logout') }}" class="nav-link"><i class="fa-solid fa-right-from-bracket"></i></a>
                    </li>
                    {% endblock %}
                </ul>
               </div>
            </div>
        </nav>
    </header>

    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}

        {% set ns = namespace(count = 0) %}

        <div class="alert-container position-fixed start-50 translate-middle w-75">
            <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                <symbol id="check-circle-fill" fill="currentColor" viewBox="0 0 16 16">
                  <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"/>
                </symbol>
                <symbol id="exclamation-triangle-fill" fill="currentColor" viewBox="0 0 16 16">
                    <path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/>
                </symbol>
            </svg>
    
            {% for category, message in messages %}                    
                {% if category == 'error' and ns.count < 2 %}
                    {% set ns.count = ns.count + 1 %}
                    
                    <div class="alert alert-danger alert-dismissible fade show d-flex align-items-center" role="alert">
                        <svg class="bi flex-shrink-0 me-2" width="24" height="24" role="img" aria-label="Danger:"><use xlink:href="#exclamation-triangle-fill"/></svg>
                        <div>
                            {{ message }}
                        </div>
                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                    </div>
                {% endif %}

                {% if category == 'success' and ns.count < 2 %}
                    {% set ns.count = ns.count + 1 %}
                
                    <div class="alert alert-success alert-dismissible fade show d-flex align-items-center" role="alert">
                        <svg class="bi flex-shrink-0 me-2" width="24" height="24" role="img" aria-label="Success:"><use xlink:href="#check-circle-fill"/></svg>
                    <div>
                        {{ message }}
                    </div>
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                    </div>
                 {% endif %}

                 {% if category == 'warning' and ns.count < 2 %}
                 <div class="alert alert-warning alert-dismissible fade show d-flex align-items-center" role="alert">
                    <svg class="bi flex-shrink-0 me-2" width="24" height="24" role="img" aria-label="Warning:"><use xlink:href="#exclamation-triangle-fill"/></svg>
                    <div>
                        {{ message }}
                    </div>
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
                 {% endif %}
                  
            {% endfor %}
        </div>
        {% endif %}

    {% endwith %}

    <main>
        {% block content %}
        Lorem ipsum dolor sit amet consectetur adipisicing elit. Eius nostrum cupiditate quia alias nulla eos veniam illum tempora, reprehenderit aspernatur, architecto, tempore facilis ad fuga ex velit adipisci quasi. Quis? Lorem ipsum dolor sit amet consectetur adipisicing elit. Temporibus maxime dolorum quis id quos tempora dicta quas nobis odio, tempore quisquam blanditiis possimus voluptatum quae officia, autem at nesciunt fugiat. Lorem ipsum dolor sit amet consectetur adipisicing elit. Cupiditate accusantium deleniti consectetur blanditiis nisi nulla sed sint excepturi vero in rerum, facilis ipsa. Eos aliquid quidem commodi id expedita provident! Lorem ipsum dolor, sit amet consectetur adipisicing elit. Nesciunt praesentium labore incidunt sequi vitae autem dolores quod eos culpa quam sit natus delectus saepe, harum libero? Et aliquam repudiandae iusto!
        {% endblock %}
    </main>

    <footer class="footer bg-dark text-light py-5">
        <div class="container">
            <div class="row align-items-start">
                <!-- Logo & App Info -->
                <div class="col-lg-4 col-md-12 mb-4 mb-lg-0 text-center text-lg-start">
                    <img src="{{ url_for('static', filename='assets/logo.png') }}" alt="Logo" class="footer-logo mb-2">
                    <p class="small mb-0">
                        A simple notes and reminders app designed by Xhulio Veizaj.
                    </p>
                </div>

                <!-- Contact Info -->
                <div class="col-lg-4 col-md-6 mb-4 mb-md-0">
                    <h5 class="footer-title">Contact Me</h5>
                    <ul class="list-unstyled">
                        <li class="mb-2">
                            <i class="fa-solid fa-envelope me-2"></i>
                            <a href="mailto:xhulioveizaj@gmail.com" class="text-light text-decoration-none">xhulioveizaj@gmail.com</a>
                        </li>
                        <li class="mb-2">
                            <i class="fa-brands fa-linkedin me-2"></i>
                            <a href="https://www.linkedin.com/in/xhulio-veizaj-1721a91b5/" class="text-light text-decoration-none">LinkedIn</a>
                        </li>
                        <li class="mb-2">
                            <i class="fa-brands fa-whatsapp me-2"></i>
                            <a href="https://wa.me/355683235768" class="text-light text-decoration-none">+355 (0) 68 323 5768</a>
                        </li>
                        <li class="mb-2">
                            <i class="fa-brands fa-instagram me-2"></i>
                            <a href="https://www.instagram.com/xhulio.v/" class="text-light text-decoration-none">@xhulio_v</a>
                        </li>
                    </ul>
                </div>

                <!-- Extra Info -->
                <div class="col-lg-4 col-md-6 text-center text-md-start">
                    <h5 class="footer-title">Connect</h5>
                    <p class="small mb-0">
                        Feel free to reach out via any of the channels above for questions, feedback, or collaborations.
                    </p>
                </div>
            </div>

            <div class="row mt-4">
                <div class="col-12 text-center small">
                    &copy; <span id="currentYear"></span> Xhulio Veizaj. All rights reserved.
                </div>
            </div>
        </div>
    </footer>

    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
    {% block extra_scripts %} {% endblock %}
</body>
</html>